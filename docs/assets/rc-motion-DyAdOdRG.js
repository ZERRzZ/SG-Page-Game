import{h as ce,i as Me,j as xe,a as be,_ as Oe,d as me,c as N,e as f,b as T,n as Te,g as Ge}from"./@babel-CFFMjQWX.js";import{c as Je}from"./classnames-BK5ccKcQ.js";import{c as pe,q as Ce,C as ne,h as Xe,s as Ye,I as Ze}from"./rc-util-C9ivse0O.js";import{r as u}from"./react-s7AnpVDj.js";var en=["children"],De=u.createContext({});function kn(n){var e=n.children,t=ce(n,en);return u.createElement(De.Provider,{value:t},e)}var nn=function(n){Me(t,n);var e=xe(t);function t(){return be(this,t),e.apply(this,arguments)}return Oe(t,[{key:"render",value:function(){return this.props.children}}]),t}(u.Component),K="none",X="appear",Y="enter",Z="leave",Re="none",_="prepare",W="start",z="active",Ee="end",Ne="prepared";function ke(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit".concat(n)]="webkit".concat(e),t["Moz".concat(n)]="moz".concat(e),t["ms".concat(n)]="MS".concat(e),t["O".concat(n)]="o".concat(e.toLowerCase()),t}function tn(n,e){var t={animationend:ke("Animation","AnimationEnd"),transitionend:ke("Transition","TransitionEnd")};return n&&("AnimationEvent"in e||delete t.animationend.animation,"TransitionEvent"in e||delete t.transitionend.transition),t}var rn=tn(pe(),typeof window<"u"?window:{}),Ue={};if(pe()){var an=document.createElement("div");Ue=an.style}var ee={};function Ve(n){if(ee[n])return ee[n];var e=rn[n];if(e)for(var t=Object.keys(e),r=t.length,i=0;i<r;i+=1){var s=t[i];if(Object.prototype.hasOwnProperty.call(e,s)&&s in Ue)return ee[n]=e[s],ee[n]}return""}var we=Ve("animationend"),Ie=Ve("transitionend"),Fe=!!(we&&Ie),Le=we||"animationend",Pe=Ie||"transitionend";function _e(n,e){if(!n)return null;if(me(n)==="object"){var t=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return n[t]}return"".concat(n,"-").concat(e)}const on=function(n){var e=u.useRef(),t=u.useRef(n);t.current=n;var r=u.useCallback(function(a){t.current(a)},[]);function i(a){a&&(a.removeEventListener(Pe,r),a.removeEventListener(Le,r))}function s(a){e.current&&e.current!==a&&i(e.current),a&&a!==e.current&&(a.addEventListener(Pe,r),a.addEventListener(Le,r),e.current=a)}return u.useEffect(function(){return function(){i(e.current)}},[]),[s,i]};var je=pe()?u.useLayoutEffect:u.useEffect;const un=function(){var n=u.useRef(null);function e(){Ce.cancel(n.current)}function t(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=Ce(function(){i<=1?r({isCanceled:function(){return s!==n.current}}):t(r,i-1)});n.current=s}return u.useEffect(function(){return function(){e()}},[]),[t,e]};var sn=[_,W,z,Ee],cn=[_,Ne],Ke=!1,vn=!0;function Qe(n){return n===z||n===Ee}const fn=function(n,e,t){var r=ne(Re),i=N(r,2),s=i[0],a=i[1],m=un(),E=N(m,2),o=E[0],c=E[1];function v(){a(_,!0)}var d=e?cn:sn;return je(function(){if(s!==Re&&s!==Ee){var l=d.indexOf(s),S=d[l+1],k=t(s);k===Ke?a(S,!0):S&&o(function(M){function C(){M.isCanceled()||a(S,!0)}k===!0?C():Promise.resolve(k).then(C)})}},[n,s]),u.useEffect(function(){return function(){c()}},[]),[v,s]};function dn(n,e,t,r){var i=r.motionEnter,s=i===void 0?!0:i,a=r.motionAppear,m=a===void 0?!0:a,E=r.motionLeave,o=E===void 0?!0:E,c=r.motionDeadline,v=r.motionLeaveImmediately,d=r.onAppearPrepare,l=r.onEnterPrepare,S=r.onLeavePrepare,k=r.onAppearStart,M=r.onEnterStart,C=r.onLeaveStart,U=r.onAppearActive,V=r.onEnterActive,D=r.onLeaveActive,w=r.onAppearEnd,L=r.onEnterEnd,R=r.onLeaveEnd,O=r.onVisibleChanged,te=ne(),Q=N(te,2),P=Q[0],I=Q[1],A=ne(K),F=N(A,2),p=F[0],x=F[1],B=ne(null),G=N(B,2),re=G[0],$=G[1],ae=u.useRef(!1),ie=u.useRef(null);function J(){return t()}var Se=u.useRef(!1);function ye(){x(K,!0),$(null,!0)}function he(g){var y=J();if(!(g&&!g.deadline&&g.target!==y)){var h=Se.current,b;p===X&&h?b=w==null?void 0:w(y,g):p===Y&&h?b=L==null?void 0:L(y,g):p===Z&&h&&(b=R==null?void 0:R(y,g)),p!==K&&h&&b!==!1&&ye()}}var $e=on(he),We=N($e,1),ze=We[0],Ae=function(y){var h,b,q;switch(y){case X:return h={},T(h,_,d),T(h,W,k),T(h,z,U),h;case Y:return b={},T(b,_,l),T(b,W,M),T(b,z,V),b;case Z:return q={},T(q,_,S),T(q,W,C),T(q,z,D),q;default:return{}}},H=u.useMemo(function(){return Ae(p)},[p]),He=fn(p,!n,function(g){if(g===_){var y=H[_];return y?y(J()):Ke}if(j in H){var h;$(((h=H[j])===null||h===void 0?void 0:h.call(H,J(),null))||null)}return j===z&&(ze(J()),c>0&&(clearTimeout(ie.current),ie.current=setTimeout(function(){he({deadline:!0})},c))),j===Ne&&ye(),vn}),ge=N(He,2),qe=ge[0],j=ge[1],Be=Qe(j);Se.current=Be,je(function(){I(e);var g=ae.current;ae.current=!0;var y;!g&&e&&m&&(y=X),g&&e&&s&&(y=Y),(g&&!e&&o||!g&&v&&!e&&o)&&(y=Z);var h=Ae(y);y&&(n||h[_])?(x(y),qe()):x(K)},[e]),u.useEffect(function(){(p===X&&!m||p===Y&&!s||p===Z&&!o)&&x(K)},[m,s,o]),u.useEffect(function(){return function(){ae.current=!1,clearTimeout(ie.current)}},[]);var oe=u.useRef(!1);u.useEffect(function(){P&&(oe.current=!0),P!==void 0&&p===K&&((oe.current||P)&&(O==null||O(P)),oe.current=!0)},[P,p]);var ue=re;return H[_]&&j===W&&(ue=f({transition:"none"},ue)),[p,j,ue,P??e]}function ln(n){var e=n;me(n)==="object"&&(e=n.transitionSupport);function t(i,s){return!!(i.motionName&&e&&s!==!1)}var r=u.forwardRef(function(i,s){var a=i.visible,m=a===void 0?!0:a,E=i.removeOnLeave,o=E===void 0?!0:E,c=i.forceRender,v=i.children,d=i.motionName,l=i.leavedClassName,S=i.eventProps,k=u.useContext(De),M=k.motion,C=t(i,M),U=u.useRef(),V=u.useRef();function D(){try{return U.current instanceof HTMLElement?U.current:Ze(V.current)}catch{return null}}var w=dn(C,m,D,i),L=N(w,4),R=L[0],O=L[1],te=L[2],Q=L[3],P=u.useRef(Q);Q&&(P.current=!0);var I=u.useCallback(function($){U.current=$,Xe(s,$)},[s]),A,F=f(f({},S),{},{visible:m});if(!v)A=null;else if(R===K)Q?A=v(f({},F),I):!o&&P.current&&l?A=v(f(f({},F),{},{className:l}),I):c||!o&&!l?A=v(f(f({},F),{},{style:{display:"none"}}),I):A=null;else{var p,x;O===_?x="prepare":Qe(O)?x="active":O===W&&(x="start");var B=_e(d,"".concat(R,"-").concat(x));A=v(f(f({},F),{},{className:Je(_e(d,R),(p={},T(p,B,B&&x),T(p,d,typeof d=="string"),p)),style:te}),I)}if(u.isValidElement(A)&&Ye(A)){var G=A,re=G.ref;re||(A=u.cloneElement(A,{ref:I}))}return u.createElement(nn,{ref:V},A)});return r.displayName="CSSMotion",r}const mn=ln(Fe);var ve="add",fe="keep",de="remove",se="removed";function pn(n){var e;return n&&me(n)==="object"&&"key"in n?e=n:e={key:n},f(f({},e),{},{key:String(e.key)})}function le(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return n.map(pn)}function En(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[],r=0,i=e.length,s=le(n),a=le(e);s.forEach(function(o){for(var c=!1,v=r;v<i;v+=1){var d=a[v];if(d.key===o.key){r<v&&(t=t.concat(a.slice(r,v).map(function(l){return f(f({},l),{},{status:ve})})),r=v),t.push(f(f({},d),{},{status:fe})),r+=1,c=!0;break}}c||t.push(f(f({},o),{},{status:de}))}),r<i&&(t=t.concat(a.slice(r).map(function(o){return f(f({},o),{},{status:ve})})));var m={};t.forEach(function(o){var c=o.key;m[c]=(m[c]||0)+1});var E=Object.keys(m).filter(function(o){return m[o]>1});return E.forEach(function(o){t=t.filter(function(c){var v=c.key,d=c.status;return v!==o||d!==de}),t.forEach(function(c){c.key===o&&(c.status=fe)})}),t}var Sn=["component","children","onVisibleChanged","onAllRemoved"],yn=["status"],hn=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function An(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mn,t=function(r){Me(s,r);var i=xe(s);function s(){var a;be(this,s);for(var m=arguments.length,E=new Array(m),o=0;o<m;o++)E[o]=arguments[o];return a=i.call.apply(i,[this].concat(E)),T(Te(a),"state",{keyEntities:[]}),T(Te(a),"removeKey",function(c){var v=a.state.keyEntities,d=v.map(function(l){return l.key!==c?l:f(f({},l),{},{status:se})});return a.setState({keyEntities:d}),d.filter(function(l){var S=l.status;return S!==se}).length}),a}return Oe(s,[{key:"render",value:function(){var m=this,E=this.state.keyEntities,o=this.props,c=o.component,v=o.children,d=o.onVisibleChanged,l=o.onAllRemoved,S=ce(o,Sn),k=c||u.Fragment,M={};return hn.forEach(function(C){M[C]=S[C],delete S[C]}),delete S.keys,u.createElement(k,S,E.map(function(C,U){var V=C.status,D=ce(C,yn),w=V===ve||V===fe;return u.createElement(e,Ge({},M,{key:D.key,visible:w,eventProps:D,onVisibleChanged:function(R){if(d==null||d(R,{key:D.key}),!R){var O=m.removeKey(D.key);O===0&&l&&l()}}}),function(L,R){return v(f(f({},L),{},{index:U}),R)})}))}}],[{key:"getDerivedStateFromProps",value:function(m,E){var o=m.keys,c=E.keyEntities,v=le(o),d=En(c,v);return{keyEntities:d.filter(function(l){var S=c.find(function(k){var M=k.key;return l.key===M});return!(S&&S.status===se&&l.status===de)})}}}]),s}(u.Component);return T(t,"defaultProps",{component:"div"}),t}const Ln=An(Fe);export{mn as C,kn as M,Ln as a};
