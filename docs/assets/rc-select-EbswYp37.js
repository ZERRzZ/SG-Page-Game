import{r as t,a as Cn}from"./react-s7AnpVDj.js";import"./react-is-DcfIKM1A.js";import{K as R,w as lt,f as ct,B as dn,b as st,l as ft,e as dt,a as vt,z as In,o as mt,y as gt,c as pt,x as ht}from"./rc-util-C9ivse0O.js";import{c as je}from"./classnames-BK5ccKcQ.js";import{F as bt}from"./rc-overflow-DRCnfb5s.js";import"./react-dom-CKXDipwq.js";import"./rc-resize-observer-CnQCMlPW.js";import"./rc-motion-DyAdOdRG.js";import{d as vn,c as ae,e as Q,b as oe,g as ke,h as nn,o as St,f as ye}from"./@babel-CFFMjQWX.js";import{T as wt}from"./@rc-component-BABNZfcJ.js";import{L as Ct}from"./rc-virtual-list-onjorEw0.js";var mn=function(e){var a=e.className,o=e.customizeIcon,r=e.customizeIconProps,u=e.children,l=e.onMouseDown,c=e.onClick,m=typeof o=="function"?o(r):o;return t.createElement("span",{className:a,onMouseDown:function(s){s.preventDefault(),l==null||l(s)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:c,"aria-hidden":!0},m!==void 0?m:t.createElement("span",{className:je(a.split(/\s+/).map(function(g){return"".concat(g,"-icon")}))},u))},yt=function(e,a,o,r,u){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,c=arguments.length>6?arguments[6]:void 0,m=arguments.length>7?arguments[7]:void 0,g=Cn.useMemo(function(){if(vn(r)==="object")return r.clearIcon;if(u)return u},[r,u]),s=Cn.useMemo(function(){return!!(!l&&r&&(o.length||c)&&!(m==="combobox"&&c===""))},[r,l,o.length,c,m]);return{allowClear:s,clearIcon:Cn.createElement(mn,{className:"".concat(e,"-clear"),onMouseDown:a,customizeIcon:g},"×")}},$n=t.createContext(null);function It(){return t.useContext($n)}function Et(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=t.useState(!1),a=ae(e,2),o=a[0],r=a[1],u=t.useRef(null),l=function(){window.clearTimeout(u.current)};t.useEffect(function(){return l},[]);var c=function(g,s){l(),u.current=window.setTimeout(function(){r(g),s&&s()},n)};return[o,c,l]}function Bn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=t.useRef(null),a=t.useRef(null);t.useEffect(function(){return function(){window.clearTimeout(a.current)}},[]);function o(r){(r||e.current===null)&&(e.current=r),window.clearTimeout(a.current),a.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},o]}function Rt(n,e,a,o){var r=t.useRef(null);r.current={open:e,triggerOpen:a,customizedTrigger:o},t.useEffect(function(){function u(l){var c;if(!((c=r.current)!==null&&c!==void 0&&c.customizedTrigger)){var m=l.target;m.shadowRoot&&l.composed&&(m=l.composedPath()[0]||m),r.current.open&&n().filter(function(g){return g}).every(function(g){return!g.contains(m)&&g!==m})&&r.current.triggerOpen(!1)}}return window.addEventListener("mousedown",u),function(){return window.removeEventListener("mousedown",u)}},[])}function Dt(n){return![R.ESC,R.SHIFT,R.BACKSPACE,R.TAB,R.WIN_KEY,R.ALT,R.META,R.WIN_KEY_RIGHT,R.CTRL,R.SEMICOLON,R.EQUALS,R.CAPS_LOCK,R.CONTEXT_MENU,R.F1,R.F2,R.F3,R.F4,R.F5,R.F6,R.F7,R.F8,R.F9,R.F10,R.F11,R.F12].includes(n)}var xt=function(e,a){var o,r=e.prefixCls,u=e.id,l=e.inputElement,c=e.disabled,m=e.tabIndex,g=e.autoFocus,s=e.autoComplete,v=e.editable,P=e.activeDescendantId,i=e.value,x=e.maxLength,w=e.onKeyDown,C=e.onMouseDown,_=e.onChange,ee=e.onPaste,H=e.onCompositionStart,L=e.onCompositionEnd,Y=e.open,B=e.attrs,z=l||t.createElement("input",null),re=z,ne=re.ref,G=re.props,W=G.onKeyDown,K=G.onChange,j=G.onMouseDown,A=G.onCompositionStart,X=G.onCompositionEnd,T=G.style;return lt(!("maxLength"in z.props)),z=t.cloneElement(z,Q(Q(Q({type:"search"},G),{},{id:u,ref:ct(a,ne),disabled:c,tabIndex:m,autoComplete:s||"off",autoFocus:g,className:je("".concat(r,"-selection-search-input"),(o=z)===null||o===void 0||(o=o.props)===null||o===void 0?void 0:o.className),role:"combobox","aria-expanded":Y||!1,"aria-haspopup":"listbox","aria-owns":"".concat(u,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(u,"_list"),"aria-activedescendant":Y?P:void 0},B),{},{value:v?i:"",maxLength:x,readOnly:!v,unselectable:v?null:"on",style:Q(Q({},T),{},{opacity:v?null:0}),onKeyDown:function(b){w(b),W&&W(b)},onMouseDown:function(b){C(b),j&&j(b)},onChange:function(b){_(b),K&&K(b)},onCompositionStart:function(b){H(b),A&&A(b)},onCompositionEnd:function(b){L(b),X&&X(b)},onPaste:ee})),z},zn=t.forwardRef(xt);function Wn(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var Mt=typeof window<"u"&&window.document&&window.document.documentElement,Ot=Mt;function Pt(n){return n!=null}function Nt(n){return!n&&n!==0}function _n(n){return["string","number"].includes(vn(n))}function Un(n){var e=void 0;return n&&(_n(n.title)?e=n.title.toString():_n(n.label)&&(e=n.label.toString())),e}function Vt(n,e){Ot?t.useLayoutEffect(n,e):t.useEffect(n,e)}function Tt(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var Ln=function(e){e.preventDefault(),e.stopPropagation()},_t=function(e){var a=e.id,o=e.prefixCls,r=e.values,u=e.open,l=e.searchValue,c=e.autoClearSearchValue,m=e.inputRef,g=e.placeholder,s=e.disabled,v=e.mode,P=e.showSearch,i=e.autoFocus,x=e.autoComplete,w=e.activeDescendantId,C=e.tabIndex,_=e.removeIcon,ee=e.maxTagCount,H=e.maxTagTextLength,L=e.maxTagPlaceholder,Y=L===void 0?function(N){return"+ ".concat(N.length," ...")}:L,B=e.tagRender,z=e.onToggleOpen,re=e.onRemove,ne=e.onInputChange,G=e.onInputPaste,W=e.onInputKeyDown,K=e.onInputMouseDown,j=e.onInputCompositionStart,A=e.onInputCompositionEnd,X=t.useRef(null),T=t.useState(0),E=ae(T,2),b=E[0],ce=E[1],de=t.useState(!1),xe=ae(de,2),Ce=xe[0],Me=xe[1],q="".concat(o,"-selection"),me=u||v==="multiple"&&c===!1||v==="tags"?l:"",Ke=v==="tags"||v==="multiple"&&c===!1||P&&(u||Ce);Vt(function(){ce(X.current.scrollWidth)},[me]);var Z=function(h,V,F,J,$){return t.createElement("span",{title:Un(h),className:je("".concat(q,"-item"),oe({},"".concat(q,"-item-disabled"),F))},t.createElement("span",{className:"".concat(q,"-item-content")},V),J&&t.createElement(mn,{className:"".concat(q,"-item-remove"),onMouseDown:Ln,onClick:$,customizeIcon:_},"×"))},Te=function(h,V,F,J,$){var ue=function(Ee){Ln(Ee),z(!u)};return t.createElement("span",{onMouseDown:ue},B({label:V,value:h,disabled:F,closable:J,onClose:$}))},_e=function(h){var V=h.disabled,F=h.label,J=h.value,$=!s&&!V,ue=F;if(typeof H=="number"&&(typeof F=="string"||typeof F=="number")){var Ie=String(ue);Ie.length>H&&(ue="".concat(Ie.slice(0,H),"..."))}var Ee=function(Le){Le&&Le.stopPropagation(),re(h)};return typeof B=="function"?Te(J,ue,V,$,Ee):Z(h,ue,V,$,Ee)},y=function(h){var V=typeof Y=="function"?Y(h):Y;return Z({title:V},V,!1)},d=t.createElement("div",{className:"".concat(q,"-search"),style:{width:b},onFocus:function(){Me(!0)},onBlur:function(){Me(!1)}},t.createElement(zn,{ref:m,open:u,prefixCls:o,id:a,inputElement:null,disabled:s,autoFocus:i,autoComplete:x,editable:Ke,activeDescendantId:w,value:me,onKeyDown:W,onMouseDown:K,onChange:ne,onPaste:G,onCompositionStart:j,onCompositionEnd:A,tabIndex:C,attrs:dn(e,!0)}),t.createElement("span",{ref:X,className:"".concat(q,"-search-mirror"),"aria-hidden":!0},me," ")),M=t.createElement(bt,{prefixCls:"".concat(q,"-overflow"),data:r,renderItem:_e,renderRest:y,suffix:d,itemKey:Tt,maxCount:ee});return t.createElement(t.Fragment,null,M,!r.length&&!me&&t.createElement("span",{className:"".concat(q,"-placeholder")},g))},Lt=function(e){var a=e.inputElement,o=e.prefixCls,r=e.id,u=e.inputRef,l=e.disabled,c=e.autoFocus,m=e.autoComplete,g=e.activeDescendantId,s=e.mode,v=e.open,P=e.values,i=e.placeholder,x=e.tabIndex,w=e.showSearch,C=e.searchValue,_=e.activeValue,ee=e.maxLength,H=e.onInputKeyDown,L=e.onInputMouseDown,Y=e.onInputChange,B=e.onInputPaste,z=e.onInputCompositionStart,re=e.onInputCompositionEnd,ne=e.title,G=t.useState(!1),W=ae(G,2),K=W[0],j=W[1],A=s==="combobox",X=A||w,T=P[0],E=C||"";A&&_&&!K&&(E=_),t.useEffect(function(){A&&j(!1)},[A,_]);var b=s!=="combobox"&&!v&&!w?!1:!!E,ce=ne===void 0?Un(T):ne,de=t.useMemo(function(){return T?null:t.createElement("span",{className:"".concat(o,"-selection-placeholder"),style:b?{visibility:"hidden"}:void 0},i)},[T,b,i,o]);return t.createElement(t.Fragment,null,t.createElement("span",{className:"".concat(o,"-selection-search")},t.createElement(zn,{ref:u,prefixCls:o,id:r,open:v,inputElement:a,disabled:l,autoFocus:c,autoComplete:m,editable:X,activeDescendantId:g,value:E,onKeyDown:H,onMouseDown:L,onChange:function(Ce){j(!0),Y(Ce)},onPaste:B,onCompositionStart:z,onCompositionEnd:re,tabIndex:x,attrs:dn(e,!0),maxLength:A?ee:void 0})),!A&&T?t.createElement("span",{className:"".concat(o,"-selection-item"),title:ce,style:b?{visibility:"hidden"}:void 0},T.label):null,de)},At=function(e,a){var o=t.useRef(null),r=t.useRef(!1),u=e.prefixCls,l=e.open,c=e.mode,m=e.showSearch,g=e.tokenWithEnter,s=e.autoClearSearchValue,v=e.onSearch,P=e.onSearchSubmit,i=e.onToggleOpen,x=e.onInputKeyDown,w=e.domRef;t.useImperativeHandle(a,function(){return{focus:function(E){o.current.focus(E)},blur:function(){o.current.blur()}}});var C=Bn(0),_=ae(C,2),ee=_[0],H=_[1],L=function(E){var b=E.which;(b===R.UP||b===R.DOWN)&&E.preventDefault(),x&&x(E),b===R.ENTER&&c==="tags"&&!r.current&&!l&&(P==null||P(E.target.value)),Dt(b)&&i(!0)},Y=function(){H(!0)},B=t.useRef(null),z=function(E){v(E,!0,r.current)!==!1&&i(!0)},re=function(){r.current=!0},ne=function(E){r.current=!1,c!=="combobox"&&z(E.target.value)},G=function(E){var b=E.target.value;if(g&&B.current&&/[\r\n]/.test(B.current)){var ce=B.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");b=b.replace(ce,B.current)}B.current=null,z(b)},W=function(E){var b=E.clipboardData,ce=b==null?void 0:b.getData("text");B.current=ce||""},K=function(E){var b=E.target;if(b!==o.current){var ce=document.body.style.msTouchAction!==void 0;ce?setTimeout(function(){o.current.focus()}):o.current.focus()}},j=function(E){var b=ee();E.target!==o.current&&!b&&c!=="combobox"&&E.preventDefault(),(c!=="combobox"&&(!m||!b)||!l)&&(l&&s!==!1&&v("",!0,!1),i())},A={inputRef:o,onInputKeyDown:L,onInputMouseDown:Y,onInputChange:G,onInputPaste:W,onInputCompositionStart:re,onInputCompositionEnd:ne},X=c==="multiple"||c==="tags"?t.createElement(_t,ke({},e,A)):t.createElement(Lt,ke({},e,A));return t.createElement("div",{ref:w,className:"".concat(u,"-selector"),onClick:K,onMouseDown:j},X)},Ft=t.forwardRef(At),kt=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],Kt=function(e){var a=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"}}},$t=function(e,a){var o=e.prefixCls;e.disabled;var r=e.visible,u=e.children,l=e.popupElement,c=e.animation,m=e.transitionName,g=e.dropdownStyle,s=e.dropdownClassName,v=e.direction,P=v===void 0?"ltr":v,i=e.placement,x=e.builtinPlacements,w=e.dropdownMatchSelectWidth,C=e.dropdownRender,_=e.dropdownAlign,ee=e.getPopupContainer,H=e.empty,L=e.getTriggerDOMNode,Y=e.onPopupVisibleChange,B=e.onPopupMouseEnter,z=nn(e,kt),re="".concat(o,"-dropdown"),ne=l;C&&(ne=C(l));var G=t.useMemo(function(){return x||Kt(w)},[x,w]),W=c?"".concat(re,"-").concat(c):m,K=typeof w=="number",j=t.useMemo(function(){return K?null:w===!1?"minWidth":"width"},[w,K]),A=g;K&&(A=Q(Q({},A),{},{width:w}));var X=t.useRef(null);return t.useImperativeHandle(a,function(){return{getPopupElement:function(){return X.current}}}),t.createElement(wt,ke({},z,{showAction:Y?["click"]:[],hideAction:Y?["click"]:[],popupPlacement:i||(P==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:G,prefixCls:re,popupTransitionName:W,popup:t.createElement("div",{ref:X,onMouseEnter:B},ne),stretch:j,popupAlign:_,popupVisible:r,getPopupContainer:ee,popupClassName:je(s,oe({},"".concat(re,"-empty"),H)),popupStyle:A,getTriggerDOMNode:L,onPopupVisibleChange:Y}),u)},Bt=t.forwardRef($t);function An(n,e){var a=n.key,o;return"value"in n&&(o=n.value),a??(o!==void 0?o:"rc-index-key-".concat(e))}function En(n){return typeof n<"u"&&!Number.isNaN(n)}function Hn(n,e){var a=n||{},o=a.label,r=a.value,u=a.options,l=a.groupLabel,c=o||(e?"children":"label");return{label:c,value:r||"value",options:u||"options",groupLabel:l||c}}function zt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.fieldNames,o=e.childrenAsData,r=[],u=Hn(a,!1),l=u.label,c=u.value,m=u.options,g=u.groupLabel;function s(v,P){Array.isArray(v)&&v.forEach(function(i){if(P||!(m in i)){var x=i[c];r.push({key:An(i,r.length),groupOption:P,data:i,label:i[l],value:x})}else{var w=i[g];w===void 0&&o&&(w=i.label),r.push({key:An(i,r.length),group:!0,data:i,label:w}),s(i[m],!0)}})}return s(n,!1),r}function Rn(n){var e=Q({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return st(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var Wt=function(e,a,o){if(!a||!a.length)return null;var r=!1,u=function c(m,g){var s=St(g),v=s[0],P=s.slice(1);if(!v)return[m];var i=m.split(v);return r=r||i.length>1,i.reduce(function(x,w){return[].concat(ye(x),ye(c(w,P)))},[]).filter(Boolean)},l=u(e,a);return r?typeof o<"u"?l.slice(0,o):l:null},xn=t.createContext(null),Ut=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Ht=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],Dn=function(e){return e==="tags"||e==="multiple"},jt=t.forwardRef(function(n,e){var a,o=n.id,r=n.prefixCls,u=n.className,l=n.showSearch,c=n.tagRender,m=n.direction,g=n.omitDomProps,s=n.displayValues,v=n.onDisplayValuesChange,P=n.emptyOptions,i=n.notFoundContent,x=i===void 0?"Not Found":i,w=n.onClear,C=n.mode,_=n.disabled,ee=n.loading,H=n.getInputElement,L=n.getRawInputElement,Y=n.open,B=n.defaultOpen,z=n.onDropdownVisibleChange,re=n.activeValue,ne=n.onActiveValueChange,G=n.activeDescendantId,W=n.searchValue,K=n.autoClearSearchValue,j=n.onSearch,A=n.onSearchSplit,X=n.tokenSeparators,T=n.allowClear,E=n.suffixIcon,b=n.clearIcon,ce=n.OptionList,de=n.animation,xe=n.transitionName,Ce=n.dropdownStyle,Me=n.dropdownClassName,q=n.dropdownMatchSelectWidth,me=n.dropdownRender,Ke=n.dropdownAlign,Z=n.placement,Te=n.builtinPlacements,_e=n.getPopupContainer,y=n.showAction,d=y===void 0?[]:y,M=n.onFocus,N=n.onBlur,h=n.onKeyUp,V=n.onKeyDown,F=n.onMouseDown,J=nn(n,Ut),$=Dn(C),ue=(l!==void 0?l:$)||C==="combobox",Ie=Q({},J);Ht.forEach(function(O){delete Ie[O]}),g==null||g.forEach(function(O){delete Ie[O]});var Ee=t.useState(!1),Ge=ae(Ee,2),Le=Ge[0],le=Ge[1];t.useEffect(function(){le(ft())},[]);var Ye=t.useRef(null),Se=t.useRef(null),pe=t.useRef(null),se=t.useRef(null),$e=t.useRef(null),he=t.useRef(!1),Xe=Et(),Oe=ae(Xe,3),Pe=Oe[0],Re=Oe[1],gn=Oe[2];t.useImperativeHandle(e,function(){var O,I;return{focus:(O=se.current)===null||O===void 0?void 0:O.focus,blur:(I=se.current)===null||I===void 0?void 0:I.blur,scrollTo:function(be){var te;return(te=$e.current)===null||te===void 0?void 0:te.scrollTo(be)}}});var De=t.useMemo(function(){var O;if(C!=="combobox")return W;var I=(O=s[0])===null||O===void 0?void 0:O.value;return typeof I=="string"||typeof I=="number"?String(I):""},[W,C,s]),an=C==="combobox"&&typeof H=="function"&&H()||null,we=typeof L=="function"&&L(),pn=dt(Se,we==null||(a=we.props)===null||a===void 0?void 0:a.ref),rn=t.useState(!1),un=ae(rn,2),hn=un[0],ln=un[1];vt(function(){ln(!0)},[]);var cn=In(!1,{defaultValue:B,value:Y}),Je=ae(cn,2),tn=Je[0],on=Je[1],ie=hn?tn:!1,sn=!x&&P;(_||sn&&ie&&C==="combobox")&&(ie=!1);var qe=sn?!1:ie,f=t.useCallback(function(O){var I=O!==void 0?O:!ie;_||(on(I),ie!==I&&(z==null||z(I)))},[_,ie,on,z]),S=t.useMemo(function(){return(X||[]).some(function(O){return[`
`,`\r
`].includes(O)})},[X]),p=t.useContext(xn)||{},D=p.maxCount,k=p.rawValues,U=function(I,ve,be){if(!($&&En(D)&&(k==null?void 0:k.size)>=D)){var te=!0,ge=I;ne==null||ne(null);var Ve=Wt(I,X,En(D)?D-k.size:void 0),We=be?null:Ve;return C!=="combobox"&&We&&(ge="",A==null||A(We),f(!1),te=!1),j&&De!==ge&&j(ge,{source:ve?"typing":"effect"}),te}},Ae=function(I){!I||!I.trim()||j(I,{source:"submit"})};t.useEffect(function(){!ie&&!$&&C!=="combobox"&&U("",!1,!1)},[ie]),t.useEffect(function(){tn&&_&&on(!1),_&&!he.current&&Re(!1)},[_]);var Ne=Bn(),Be=ae(Ne,2),fe=Be[0],ze=Be[1],bn=function(I){var ve=fe(),be=I.which;if(be===R.ENTER&&(C!=="combobox"&&I.preventDefault(),ie||f(!0)),ze(!!De),be===R.BACKSPACE&&!ve&&$&&!De&&s.length){for(var te=ye(s),ge=null,Ve=te.length-1;Ve>=0;Ve-=1){var We=te[Ve];if(!We.disabled){te.splice(Ve,1),ge=We;break}}ge&&v(te,{type:"remove",values:[ge]})}for(var Ue=arguments.length,en=new Array(Ue>1?Ue-1:0),He=1;He<Ue;He++)en[He-1]=arguments[He];if(ie){var fn;(fn=$e.current)===null||fn===void 0||fn.onKeyDown.apply(fn,[I].concat(en))}V==null||V.apply(void 0,[I].concat(en))},Sn=function(I){for(var ve=arguments.length,be=new Array(ve>1?ve-1:0),te=1;te<ve;te++)be[te-1]=arguments[te];if(ie){var ge;(ge=$e.current)===null||ge===void 0||ge.onKeyUp.apply(ge,[I].concat(be))}h==null||h.apply(void 0,[I].concat(be))},Mn=function(I){var ve=s.filter(function(be){return be!==I});v(ve,{type:"remove",values:[I]})},Qe=t.useRef(!1),Fe=function(){Re(!0),_||(M&&!Qe.current&&M.apply(void 0,arguments),d.includes("focus")&&f(!0)),Qe.current=!0},Jn=function(){he.current=!0,Re(!1,function(){Qe.current=!1,he.current=!1,f(!1)}),!_&&(De&&(C==="tags"?j(De,{source:"submit"}):C==="multiple"&&j("",{source:"blur"})),N&&N.apply(void 0,arguments))},Ze=[];t.useEffect(function(){return function(){Ze.forEach(function(O){return clearTimeout(O)}),Ze.splice(0,Ze.length)}},[]);var Qn=function(I){var ve,be=I.target,te=(ve=pe.current)===null||ve===void 0?void 0:ve.getPopupElement();if(te&&te.contains(be)){var ge=setTimeout(function(){var en=Ze.indexOf(ge);if(en!==-1&&Ze.splice(en,1),gn(),!Le&&!te.contains(document.activeElement)){var He;(He=se.current)===null||He===void 0||He.focus()}});Ze.push(ge)}for(var Ve=arguments.length,We=new Array(Ve>1?Ve-1:0),Ue=1;Ue<Ve;Ue++)We[Ue-1]=arguments[Ue];F==null||F.apply(void 0,[I].concat(We))},qn=t.useState({}),Zn=ae(qn,2),et=Zn[1];function nt(){et({})}var On;we&&(On=function(I){f(I)}),Rt(function(){var O;return[Ye.current,(O=pe.current)===null||O===void 0?void 0:O.getPopupElement()]},qe,f,!!we);var tt=t.useMemo(function(){return Q(Q({},n),{},{notFoundContent:x,open:ie,triggerOpen:qe,id:o,showSearch:ue,multiple:$,toggleOpen:f})},[n,x,qe,ie,o,ue,$,f]),Pn=!!E||ee,Nn;Pn&&(Nn=t.createElement(mn,{className:je("".concat(r,"-arrow"),oe({},"".concat(r,"-arrow-loading"),ee)),customizeIcon:E,customizeIconProps:{loading:ee,searchValue:De,open:ie,focused:Pe,showSearch:ue}}));var ot=function(){var I;w==null||w(),(I=se.current)===null||I===void 0||I.focus(),v([],{type:"clear",values:s}),U("",!1,!1)},Vn=yt(r,ot,s,T,b,_,De,C),at=Vn.allowClear,rt=Vn.clearIcon,it=t.createElement(ce,{ref:$e}),ut=je(r,u,oe(oe(oe(oe(oe(oe(oe(oe(oe(oe({},"".concat(r,"-focused"),Pe),"".concat(r,"-multiple"),$),"".concat(r,"-single"),!$),"".concat(r,"-allow-clear"),T),"".concat(r,"-show-arrow"),Pn),"".concat(r,"-disabled"),_),"".concat(r,"-loading"),ee),"".concat(r,"-open"),ie),"".concat(r,"-customize-input"),an),"".concat(r,"-show-search"),ue)),Tn=t.createElement(Bt,{ref:pe,disabled:_,prefixCls:r,visible:qe,popupElement:it,animation:de,transitionName:xe,dropdownStyle:Ce,dropdownClassName:Me,direction:m,dropdownMatchSelectWidth:q,dropdownRender:me,dropdownAlign:Ke,placement:Z,builtinPlacements:Te,getPopupContainer:_e,empty:P,getTriggerDOMNode:function(){return Se.current},onPopupVisibleChange:On,onPopupMouseEnter:nt},we?t.cloneElement(we,{ref:pn}):t.createElement(Ft,ke({},n,{domRef:Se,prefixCls:r,inputElement:an,ref:se,id:o,showSearch:ue,autoClearSearchValue:K,mode:C,activeDescendantId:G,tagRender:c,values:s,open:ie,onToggleOpen:f,activeValue:re,searchValue:De,onSearch:U,onSearchSubmit:Ae,onRemove:Mn,tokenWithEnter:S}))),wn;return we?wn=Tn:wn=t.createElement("div",ke({className:ut},Ie,{ref:Ye,onMouseDown:Qn,onKeyDown:bn,onKeyUp:Sn,onFocus:Fe,onBlur:Jn}),Pe&&!ie&&t.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(s.map(function(O){var I=O.label,ve=O.value;return["number","string"].includes(vn(I))?I:ve}).join(", "))),Tn,Nn,at&&rt),t.createElement($n.Provider,{value:tt},wn)}),jn=function(){return null};jn.isSelectOptGroup=!0;var Gn=function(){return null};Gn.isSelectOption=!0;function Gt(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var Yt=["disabled","title","children","style","className"];function Fn(n){return typeof n=="string"||typeof n=="number"}var Xt=function(e,a){var o=It(),r=o.prefixCls,u=o.id,l=o.open,c=o.multiple,m=o.mode,g=o.searchValue,s=o.toggleOpen,v=o.notFoundContent,P=o.onPopupScroll,i=t.useContext(xn),x=i.maxCount,w=i.flattenOptions,C=i.onActiveValue,_=i.defaultActiveFirstOption,ee=i.onSelect,H=i.menuItemSelectedIcon,L=i.rawValues,Y=i.fieldNames,B=i.virtual,z=i.direction,re=i.listHeight,ne=i.listItemHeight,G=i.optionRender,W="".concat(r,"-item"),K=mt(function(){return w},[l,w],function(y,d){return d[0]&&y[1]!==d[1]}),j=t.useRef(null),A=t.useMemo(function(){return c&&En(x)&&(L==null?void 0:L.size)>=x},[c,x,L==null?void 0:L.size]),X=function(d){d.preventDefault()},T=function(d){var M;(M=j.current)===null||M===void 0||M.scrollTo(typeof d=="number"?{index:d}:d)},E=function(d){for(var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,N=K.length,h=0;h<N;h+=1){var V=(d+h*M+N)%N,F=K[V]||{},J=F.group,$=F.data;if(!J&&!($!=null&&$.disabled)&&!A)return V}return-1},b=t.useState(function(){return E(0)}),ce=ae(b,2),de=ce[0],xe=ce[1],Ce=function(d){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;xe(d);var N={source:M?"keyboard":"mouse"},h=K[d];if(!h){C(null,-1,N);return}C(h.value,d,N)};t.useEffect(function(){Ce(_!==!1?E(0):-1)},[K.length,g]);var Me=t.useCallback(function(y){return L.has(y)&&m!=="combobox"},[m,ye(L).toString(),L.size]);t.useEffect(function(){var y=setTimeout(function(){if(!c&&l&&L.size===1){var M=Array.from(L)[0],N=K.findIndex(function(h){var V=h.data;return V.value===M});N!==-1&&(Ce(N),T(N))}});if(l){var d;(d=j.current)===null||d===void 0||d.scrollTo(void 0)}return function(){return clearTimeout(y)}},[l,g]);var q=function(d){d!==void 0&&ee(d,{selected:!L.has(d)}),c||s(!1)};if(t.useImperativeHandle(a,function(){return{onKeyDown:function(d){var M=d.which,N=d.ctrlKey;switch(M){case R.N:case R.P:case R.UP:case R.DOWN:{var h=0;if(M===R.UP?h=-1:M===R.DOWN?h=1:Gt()&&N&&(M===R.N?h=1:M===R.P&&(h=-1)),h!==0){var V=E(de+h,h);T(V),Ce(V,!0)}break}case R.ENTER:{var F,J=K[de];J&&!(J!=null&&(F=J.data)!==null&&F!==void 0&&F.disabled)&&!A?q(J.value):q(void 0),l&&d.preventDefault();break}case R.ESC:s(!1),l&&d.stopPropagation()}},onKeyUp:function(){},scrollTo:function(d){T(d)}}}),K.length===0)return t.createElement("div",{role:"listbox",id:"".concat(u,"_list"),className:"".concat(W,"-empty"),onMouseDown:X},v);var me=Object.keys(Y).map(function(y){return Y[y]}),Ke=function(d){return d.label};function Z(y,d){var M=y.group;return{role:M?"presentation":"option",id:"".concat(u,"_list_").concat(d)}}var Te=function(d){var M=K[d];if(!M)return null;var N=M.data||{},h=N.value,V=M.group,F=dn(N,!0),J=Ke(M);return M?t.createElement("div",ke({"aria-label":typeof J=="string"&&!V?J:null},F,{key:d},Z(M,d),{"aria-selected":Me(h)}),h):null},_e={role:"listbox",id:"".concat(u,"_list")};return t.createElement(t.Fragment,null,B&&t.createElement("div",ke({},_e,{style:{height:0,width:0,overflow:"hidden"}}),Te(de-1),Te(de),Te(de+1)),t.createElement(Ct,{itemKey:"key",ref:j,data:K,height:re,itemHeight:ne,fullHeight:!1,onMouseDown:X,onScroll:P,virtual:B,direction:z,innerProps:B?null:_e},function(y,d){var M=y.group,N=y.groupOption,h=y.data,V=y.label,F=y.value,J=h.key;if(M){var $,ue=($=h.title)!==null&&$!==void 0?$:Fn(V)?V.toString():void 0;return t.createElement("div",{className:je(W,"".concat(W,"-group"),h.className),title:ue},V!==void 0?V:J)}var Ie=h.disabled,Ee=h.title;h.children;var Ge=h.style,Le=h.className,le=nn(h,Yt),Ye=gt(le,me),Se=Me(F),pe=Ie||!Se&&A,se="".concat(W,"-option"),$e=je(W,se,Le,oe(oe(oe(oe({},"".concat(se,"-grouped"),N),"".concat(se,"-active"),de===d&&!pe),"".concat(se,"-disabled"),pe),"".concat(se,"-selected"),Se)),he=Ke(y),Xe=!H||typeof H=="function"||Se,Oe=typeof he=="number"?he:he||F,Pe=Fn(Oe)?Oe.toString():void 0;return Ee!==void 0&&(Pe=Ee),t.createElement("div",ke({},dn(Ye),B?{}:Z(y,d),{"aria-selected":Se,className:$e,title:Pe,onMouseMove:function(){de===d||pe||Ce(d)},onClick:function(){pe||q(F)},style:Ge}),t.createElement("div",{className:"".concat(se,"-content")},typeof G=="function"?G(y,{index:d}):Oe),t.isValidElement(H)||Se,Xe&&t.createElement(mn,{className:"".concat(W,"-option-state"),customizeIcon:H,customizeIconProps:{value:F,disabled:pe,isSelected:Se}},Se?"✓":null))}))},Jt=t.forwardRef(Xt);const Qt=function(n,e){var a=t.useRef({values:new Map,options:new Map}),o=t.useMemo(function(){var u=a.current,l=u.values,c=u.options,m=n.map(function(v){if(v.label===void 0){var P;return Q(Q({},v),{},{label:(P=l.get(v.value))===null||P===void 0?void 0:P.label})}return v}),g=new Map,s=new Map;return m.forEach(function(v){g.set(v.value,v),s.set(v.value,e.get(v.value)||c.get(v.value))}),a.current.values=g,a.current.options=s,m},[n,e]),r=t.useCallback(function(u){return e.get(u)||a.current.options.get(u)},[e]);return[o,r]};function yn(n,e){return Wn(n).join("").toUpperCase().includes(e)}const qt=function(n,e,a,o,r){return t.useMemo(function(){if(!a||o===!1)return n;var u=e.options,l=e.label,c=e.value,m=[],g=typeof o=="function",s=a.toUpperCase(),v=g?o:function(i,x){return r?yn(x[r],s):x[u]?yn(x[l!=="children"?l:"label"],s):yn(x[c],s)},P=g?function(i){return Rn(i)}:function(i){return i};return n.forEach(function(i){if(i[u]){var x=v(a,P(i));if(x)m.push(i);else{var w=i[u].filter(function(C){return v(a,P(C))});w.length&&m.push(Q(Q({},i),{},oe({},u,w)))}return}v(a,P(i))&&m.push(i)}),m},[n,o,r,a,e])};var kn=0,Zt=pt();function eo(){var n;return Zt?(n=kn,kn+=1):n="TEST_OR_SSR",n}function no(n){var e=t.useState(),a=ae(e,2),o=a[0],r=a[1];return t.useEffect(function(){r("rc_select_".concat(eo()))},[]),n||o}var to=["children","value"],oo=["children"];function ao(n){var e=n,a=e.key,o=e.props,r=o.children,u=o.value,l=nn(o,to);return Q({key:a,value:u!==void 0?u:a,children:r},l)}function Yn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ht(n).map(function(a,o){if(!t.isValidElement(a)||!a.type)return null;var r=a,u=r.type.isSelectOptGroup,l=r.key,c=r.props,m=c.children,g=nn(c,oo);return e||!u?ao(a):Q(Q({key:"__RC_SELECT_GRP__".concat(l===null?o:l,"__"),label:l},g),{},{options:Yn(m)})}).filter(function(a){return a})}var ro=function(e,a,o,r,u){return t.useMemo(function(){var l=e,c=!e;c&&(l=Yn(a));var m=new Map,g=new Map,s=function(i,x,w){w&&typeof w=="string"&&i.set(x[w],x)},v=function P(i){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,w=0;w<i.length;w+=1){var C=i[w];!C[o.options]||x?(m.set(C[o.value],C),s(g,C,o.label),s(g,C,r),s(g,C,u)):P(C[o.options],!0)}};return v(l),{options:l,valueOptions:m,labelOptions:g}},[e,a,o,r,u])};function Kn(n){var e=t.useRef();e.current=n;var a=t.useCallback(function(){return e.current.apply(e,arguments)},[]);return a}var io=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],uo=["inputValue"];function lo(n){return!n||vn(n)!=="object"}var co=t.forwardRef(function(n,e){var a=n.id,o=n.mode,r=n.prefixCls,u=r===void 0?"rc-select":r,l=n.backfill,c=n.fieldNames,m=n.inputValue,g=n.searchValue,s=n.onSearch,v=n.autoClearSearchValue,P=v===void 0?!0:v,i=n.onSelect,x=n.onDeselect,w=n.dropdownMatchSelectWidth,C=w===void 0?!0:w,_=n.filterOption,ee=n.filterSort,H=n.optionFilterProp,L=n.optionLabelProp,Y=n.options,B=n.optionRender,z=n.children,re=n.defaultActiveFirstOption,ne=n.menuItemSelectedIcon,G=n.virtual,W=n.direction,K=n.listHeight,j=K===void 0?200:K,A=n.listItemHeight,X=A===void 0?20:A,T=n.labelRender,E=n.value,b=n.defaultValue,ce=n.labelInValue,de=n.onChange,xe=n.maxCount,Ce=nn(n,io),Me=no(a),q=Dn(o),me=!!(!Y&&z),Ke=t.useMemo(function(){return _===void 0&&o==="combobox"?!1:_},[_,o]),Z=t.useMemo(function(){return Hn(c,me)},[JSON.stringify(c),me]),Te=In("",{value:g!==void 0?g:m,postState:function(S){return S||""}}),_e=ae(Te,2),y=_e[0],d=_e[1],M=ro(Y,z,Z,H,L),N=M.valueOptions,h=M.labelOptions,V=M.options,F=t.useCallback(function(f){var S=Wn(f);return S.map(function(p){var D,k,U,Ae,Ne;if(lo(p))D=p;else{var Be;U=p.key,k=p.label,D=(Be=p.value)!==null&&Be!==void 0?Be:U}var fe=N.get(D);if(fe){var ze;k===void 0&&(k=fe==null?void 0:fe[L||Z.label]),U===void 0&&(U=(ze=fe==null?void 0:fe.key)!==null&&ze!==void 0?ze:D),Ae=fe==null?void 0:fe.disabled,Ne=fe==null?void 0:fe.title}return{label:k,value:D,key:U,disabled:Ae,title:Ne}})},[Z,L,N]),J=In(b,{value:E}),$=ae(J,2),ue=$[0],Ie=$[1],Ee=t.useMemo(function(){var f,S=q&&ue===null?[]:ue,p=F(S);return o==="combobox"&&Nt((f=p[0])===null||f===void 0?void 0:f.value)?[]:p},[ue,F,o,q]),Ge=Qt(Ee,N),Le=ae(Ge,2),le=Le[0],Ye=Le[1],Se=t.useMemo(function(){if(!o&&le.length===1){var f=le[0];if(f.value===null&&(f.label===null||f.label===void 0))return[]}return le.map(function(S){var p;return Q(Q({},S),{},{label:(p=typeof T=="function"?T(S):S.label)!==null&&p!==void 0?p:S.value})})},[o,le,T]),pe=t.useMemo(function(){return new Set(le.map(function(f){return f.value}))},[le]);t.useEffect(function(){if(o==="combobox"){var f,S=(f=le[0])===null||f===void 0?void 0:f.value;d(Pt(S)?String(S):"")}},[le]);var se=Kn(function(f,S){var p=S??f;return oe(oe({},Z.value,f),Z.label,p)}),$e=t.useMemo(function(){if(o!=="tags")return V;var f=ye(V),S=function(D){return N.has(D)};return ye(le).sort(function(p,D){return p.value<D.value?-1:1}).forEach(function(p){var D=p.value;S(D)||f.push(se(D,p.label))}),f},[se,V,N,le,o]),he=qt($e,Z,y,Ke,H),Xe=t.useMemo(function(){return o!=="tags"||!y||he.some(function(f){return f[H||"value"]===y})||he.some(function(f){return f[Z.value]===y})?he:[se(y)].concat(ye(he))},[se,H,o,he,y,Z]),Oe=t.useMemo(function(){return ee?ye(Xe).sort(function(f,S){return ee(f,S)}):Xe},[Xe,ee]),Pe=t.useMemo(function(){return zt(Oe,{fieldNames:Z,childrenAsData:me})},[Oe,Z,me]),Re=function(S){var p=F(S);if(Ie(p),de&&(p.length!==le.length||p.some(function(U,Ae){var Ne;return((Ne=le[Ae])===null||Ne===void 0?void 0:Ne.value)!==(U==null?void 0:U.value)}))){var D=ce?p:p.map(function(U){return U.value}),k=p.map(function(U){return Rn(Ye(U.value))});de(q?D:D[0],q?k:k[0])}},gn=t.useState(null),De=ae(gn,2),an=De[0],we=De[1],pn=t.useState(0),rn=ae(pn,2),un=rn[0],hn=rn[1],ln=re!==void 0?re:o!=="combobox",cn=t.useCallback(function(f,S){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},D=p.source,k=D===void 0?"keyboard":D;hn(S),l&&o==="combobox"&&f!==null&&k==="keyboard"&&we(String(f))},[l,o]),Je=function(S,p,D){var k=function(){var Qe,Fe=Ye(S);return[ce?{label:Fe==null?void 0:Fe[Z.label],value:S,key:(Qe=Fe==null?void 0:Fe.key)!==null&&Qe!==void 0?Qe:S}:S,Rn(Fe)]};if(p&&i){var U=k(),Ae=ae(U,2),Ne=Ae[0],Be=Ae[1];i(Ne,Be)}else if(!p&&x&&D!=="clear"){var fe=k(),ze=ae(fe,2),bn=ze[0],Sn=ze[1];x(bn,Sn)}},tn=Kn(function(f,S){var p,D=q?S.selected:!0;D?p=q?[].concat(ye(le),[f]):[f]:p=le.filter(function(k){return k.value!==f}),Re(p),Je(f,D),o==="combobox"?we(""):(!Dn||P)&&(d(""),we(""))}),on=function(S,p){Re(S);var D=p.type,k=p.values;(D==="remove"||D==="clear")&&k.forEach(function(U){Je(U.value,!1,D)})},ie=function(S,p){if(d(S),we(null),p.source==="submit"){var D=(S||"").trim();if(D){var k=Array.from(new Set([].concat(ye(pe),[D])));Re(k),Je(D,!0),d("")}return}p.source!=="blur"&&(o==="combobox"&&Re(S),s==null||s(S))},sn=function(S){var p=S;o!=="tags"&&(p=S.map(function(k){var U=h.get(k);return U==null?void 0:U.value}).filter(function(k){return k!==void 0}));var D=Array.from(new Set([].concat(ye(pe),ye(p))));Re(D),D.forEach(function(k){Je(k,!0)})},qe=t.useMemo(function(){var f=G!==!1&&C!==!1;return Q(Q({},M),{},{flattenOptions:Pe,onActiveValue:cn,defaultActiveFirstOption:ln,onSelect:tn,menuItemSelectedIcon:ne,rawValues:pe,fieldNames:Z,virtual:f,direction:W,listHeight:j,listItemHeight:X,childrenAsData:me,maxCount:xe,optionRender:B})},[xe,M,Pe,cn,ln,tn,ne,pe,Z,G,C,W,j,X,me,B]);return t.createElement(xn.Provider,{value:qe},t.createElement(jt,ke({},Ce,{id:Me,prefixCls:u,ref:e,omitDomProps:uo,mode:o,displayValues:Se,onDisplayValuesChange:on,direction:W,searchValue:y,onSearch:ie,autoClearSearchValue:P,onSearchSplit:sn,dropdownMatchSelectWidth:C,OptionList:Jt,emptyOptions:!Pe.length,activeValue:an,activeDescendantId:"".concat(Me,"_list_").concat(un)})))}),Xn=co;Xn.Option=Gn;Xn.OptGroup=jn;export{jt as B,Gn as O,Xn as T,jn as a,no as b,It as u};
