import{h as tt,g as at,b as J,e as Y,c as V,f as ne,d as ht}from"./@babel-CFFMjQWX.js";import{c as se}from"./classnames-BK5ccKcQ.js";import{K as X,z as bt,b as yt,n as Ct}from"./rc-util-C9ivse0O.js";import{r as t}from"./react-s7AnpVDj.js";var ve=t.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}});function He(e,u,r){return(e-u)/(r-u)}function Te(e,u,r,f){var o=He(u,r,f),i={};switch(e){case"rtl":i.right="".concat(o*100,"%"),i.transform="translateX(50%)";break;case"btt":i.bottom="".concat(o*100,"%"),i.transform="translateY(50%)";break;case"ttb":i.top="".concat(o*100,"%"),i.transform="translateY(-50%)";break;default:i.left="".concat(o*100,"%"),i.transform="translateX(-50%)";break}return i}function he(e,u){return Array.isArray(e)?e[u]:e}var St=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange","onChangeComplete"],kt=t.forwardRef(function(e,u){var r,f,o=e.prefixCls,i=e.value,s=e.valueIndex,b=e.onStartMove,M=e.style,S=e.render,y=e.dragging,C=e.onOffsetChange,m=e.onChangeComplete,g=tt(e,St),n=t.useContext(ve),v=n.min,c=n.max,l=n.direction,a=n.disabled,h=n.keyboard,w=n.range,R=n.tabIndex,H=n.ariaLabelForHandle,T=n.ariaLabelledByForHandle,L=n.ariaValueTextFormatterForHandle,N=n.styles,_=n.classNames,P="".concat(o,"-handle"),A=function(E){a||b(E,s)},j=function(E){if(!a&&h){var x=null;switch(E.which||E.keyCode){case X.LEFT:x=l==="ltr"||l==="btt"?-1:1;break;case X.RIGHT:x=l==="ltr"||l==="btt"?1:-1;break;case X.UP:x=l!=="ttb"?1:-1;break;case X.DOWN:x=l!=="ttb"?-1:1;break;case X.HOME:x="min";break;case X.END:x="max";break;case X.PAGE_UP:x=2;break;case X.PAGE_DOWN:x=-2;break}x!==null&&(E.preventDefault(),C(x,s))}},Q=function(E){switch(E.which||E.keyCode){case X.LEFT:case X.RIGHT:case X.UP:case X.DOWN:case X.HOME:case X.END:case X.PAGE_UP:case X.PAGE_DOWN:m==null||m();break}},U=Te(l,i,v,c),B=t.createElement("div",at({ref:u,className:se(P,(r={},J(r,"".concat(P,"-").concat(s+1),w),J(r,"".concat(P,"-dragging"),y),r),_.handle),style:Y(Y(Y({},U),M),N.handle),onMouseDown:A,onTouchStart:A,onKeyDown:j,onKeyUp:Q,tabIndex:a?null:he(R,s),role:"slider","aria-valuemin":v,"aria-valuemax":c,"aria-valuenow":i,"aria-disabled":a,"aria-label":he(H,s),"aria-labelledby":he(T,s),"aria-valuetext":(f=he(L,s))===null||f===void 0?void 0:f(i),"aria-orientation":l==="ltr"||l==="rtl"?"horizontal":"vertical"},g));return S&&(B=S(B,{index:s,prefixCls:o,value:i,dragging:y})),B}),Mt=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],Et=t.forwardRef(function(e,u){var r=e.prefixCls,f=e.style,o=e.onStartMove,i=e.onOffsetChange,s=e.values,b=e.handleRender,M=e.draggingIndex,S=tt(e,Mt),y=t.useRef({});return t.useImperativeHandle(u,function(){return{focus:function(m){var g;(g=y.current[m])===null||g===void 0||g.focus()}}}),t.createElement(t.Fragment,null,s.map(function(C,m){return t.createElement(kt,at({ref:function(n){n?y.current[m]=n:delete y.current[m]},dragging:M===m,prefixCls:r,style:he(f,m),key:m,value:C,valueIndex:m,onStartMove:o,onOffsetChange:i,render:b},S))}))});function pe(e){var u="touches"in e?e.touches[0]:e;return{pageX:u.pageX,pageY:u.pageY}}function xt(e,u,r,f,o,i,s,b,M){var S=t.useState(null),y=V(S,2),C=y[0],m=y[1],g=t.useState(-1),n=V(g,2),v=n[0],c=n[1],l=t.useState(r),a=V(l,2),h=a[0],w=a[1],R=t.useState(r),H=V(R,2),T=H[0],L=H[1],N=t.useRef(null),_=t.useRef(null);t.useEffect(function(){v===-1&&w(r)},[r,v]),t.useEffect(function(){return function(){document.removeEventListener("mousemove",N.current),document.removeEventListener("mouseup",_.current),document.removeEventListener("touchmove",N.current),document.removeEventListener("touchend",_.current)}},[]);var P=function($,E){h.some(function(x,G){return x!==$[G]})&&(E!==void 0&&m(E),w($),s($))},A=function($,E){if($===-1){var x=T[0],G=T[T.length-1],de=f-x,le=o-G,W=E*(o-f);W=Math.max(W,de),W=Math.min(W,le);var be=i(x+W);W=be-x;var Z=T.map(function(te){return te+W});P(Z)}else{var ue=(o-f)*E,ee=ne(h);ee[$]=T[$];var p=M(ee,ue,$,"dist");P(p.values,p.value)}},j=t.useRef(A);j.current=A;var Q=function($,E,x){$.stopPropagation();var G=x||r,de=G[E];c(E),m(de),L(G);var le=pe($),W=le.pageX,be=le.pageY,Z=function(p){p.preventDefault();var te=pe(p),Pe=te.pageX,De=te.pageY,ye=Pe-W,Ce=De-be,Se=e.current.getBoundingClientRect(),ke=Se.width,Me=Se.height,z;switch(u){case"btt":z=-Ce/Me;break;case"ttb":z=Ce/Me;break;case"rtl":z=-ye/ke;break;default:z=ye/ke}j.current(E,z)},ue=function ee(p){p.preventDefault(),document.removeEventListener("mouseup",ee),document.removeEventListener("mousemove",Z),document.removeEventListener("touchend",ee),document.removeEventListener("touchmove",Z),N.current=null,_.current=null,c(-1),b()};document.addEventListener("mouseup",ue),document.addEventListener("mousemove",Z),document.addEventListener("touchend",ue),document.addEventListener("touchmove",Z),N.current=Z,_.current=ue},U=t.useMemo(function(){var B=ne(r).sort(function(E,x){return E-x}),$=ne(h).sort(function(E,x){return E-x});return B.every(function(E,x){return E===$[x]})?h:r},[r,h]);return[v,C,U,Q]}function Rt(e,u,r,f,o,i){var s=t.useCallback(function(g){var n=isFinite(g)?g:e;return n=Math.min(u,g),n=Math.max(e,n),n},[e,u]),b=t.useCallback(function(g){if(r!==null){var n=e+Math.round((s(g)-e)/r)*r,v=function(h){return(String(h).split(".")[1]||"").length},c=Math.max(v(r),v(u),v(e)),l=Number(n.toFixed(c));return e<=l&&l<=u?l:null}return null},[r,e,u,s]),M=t.useCallback(function(g){var n=s(g),v=f.map(function(a){return a.value});r!==null&&v.push(b(g)),v.push(e,u);var c=v[0],l=u-e;return v.forEach(function(a){var h=Math.abs(n-a);h<=l&&(c=a,l=h)}),c},[e,u,f,r,s,b]),S=function g(n,v,c){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof v=="number"){var a,h=n[c],w=h+v,R=[];f.forEach(function(_){R.push(_.value)}),R.push(e,u),R.push(b(h));var H=v>0?1:-1;l==="unit"?R.push(b(h+H*r)):R.push(b(w)),R=R.filter(function(_){return _!==null}).filter(function(_){return v<0?_<=h:_>=h}),l==="unit"&&(R=R.filter(function(_){return _!==h}));var T=l==="unit"?h:w;a=R[0];var L=Math.abs(a-T);if(R.forEach(function(_){var P=Math.abs(_-T);P<L&&(a=_,L=P)}),a===void 0)return v<0?e:u;if(l==="dist")return a;if(Math.abs(v)>1){var N=ne(n);return N[c]=a,g(N,v-H,c,l)}return a}else{if(v==="min")return e;if(v==="max")return u}},y=function(n,v,c){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",a=n[c],h=S(n,v,c,l);return{value:h,changed:h!==a}},C=function(n){return i===null&&n===0||typeof i=="number"&&n<i},m=function(n,v,c){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",a=n.map(M),h=a[c],w=S(a,v,c,l);if(a[c]=w,o===!1){var R=i||0;c>0&&a[c-1]!==h&&(a[c]=Math.max(a[c],a[c-1]+R)),c<a.length-1&&a[c+1]!==h&&(a[c]=Math.min(a[c],a[c+1]-R))}else if(typeof i=="number"||i===null){for(var H=c+1;H<a.length;H+=1)for(var T=!0;C(a[H]-a[H-1])&&T;){var L=y(a,1,H);a[H]=L.value,T=L.changed}for(var N=c;N>0;N-=1)for(var _=!0;C(a[N]-a[N-1])&&_;){var P=y(a,-1,N-1);a[N-1]=P.value,_=P.changed}for(var A=a.length-1;A>0;A-=1)for(var j=!0;C(a[A]-a[A-1])&&j;){var Q=y(a,-1,A-1);a[A-1]=Q.value,j=Q.changed}for(var U=0;U<a.length-1;U+=1)for(var B=!0;C(a[U+1]-a[U])&&B;){var $=y(a,1,U+1);a[U+1]=$.value,B=$.changed}}return{value:a[c],values:a}};return[M,m]}function $t(e){var u=e.prefixCls,r=e.style,f=e.children,o=e.value,i=e.onClick,s=t.useContext(ve),b=s.min,M=s.max,S=s.direction,y=s.includedStart,C=s.includedEnd,m=s.included,g="".concat(u,"-text"),n=Te(S,o,b,M);return t.createElement("span",{className:se(g,J({},"".concat(g,"-active"),m&&y<=o&&o<=C)),style:Y(Y({},n),r),onMouseDown:function(c){c.stopPropagation()},onClick:function(){i(o)}},f)}function _t(e){var u=e.prefixCls,r=e.marks,f=e.onClick,o="".concat(u,"-mark");return r.length?t.createElement("div",{className:o},r.map(function(i){var s=i.value,b=i.style,M=i.label;return t.createElement($t,{key:s,prefixCls:o,style:b,value:s,onClick:f},M)})):null}function wt(e){var u=e.prefixCls,r=e.value,f=e.style,o=e.activeStyle,i=t.useContext(ve),s=i.min,b=i.max,M=i.direction,S=i.included,y=i.includedStart,C=i.includedEnd,m="".concat(u,"-dot"),g=S&&y<=r&&r<=C,n=Y(Y({},Te(M,r,s,b)),typeof f=="function"?f(r):f);return g&&(n=Y(Y({},n),typeof o=="function"?o(r):o)),t.createElement("span",{className:se(m,J({},"".concat(m,"-active"),g)),style:n})}function Nt(e){var u=e.prefixCls,r=e.marks,f=e.dots,o=e.style,i=e.activeStyle,s=t.useContext(ve),b=s.min,M=s.max,S=s.step,y=t.useMemo(function(){var C=new Set;if(r.forEach(function(g){C.add(g.value)}),f&&S!==null)for(var m=b;m<=M;)C.add(m),m+=S;return Array.from(C)},[b,M,S,f,r]);return t.createElement("div",{className:"".concat(u,"-step")},y.map(function(C){return t.createElement(wt,{prefixCls:u,key:C,value:C,style:o,activeStyle:i})}))}function et(e){var u,r=e.prefixCls,f=e.style,o=e.start,i=e.end,s=e.index,b=e.onStartMove,M=e.replaceCls,S=t.useContext(ve),y=S.direction,C=S.min,m=S.max,g=S.disabled,n=S.range,v=S.classNames,c="".concat(r,"-track"),l=He(o,C,m),a=He(i,C,m),h=function(T){!g&&b&&b(T,-1)},w={};switch(y){case"rtl":w.right="".concat(l*100,"%"),w.width="".concat(a*100-l*100,"%");break;case"btt":w.bottom="".concat(l*100,"%"),w.height="".concat(a*100-l*100,"%");break;case"ttb":w.top="".concat(l*100,"%"),w.height="".concat(a*100-l*100,"%");break;default:w.left="".concat(l*100,"%"),w.width="".concat(a*100-l*100,"%")}var R=M||se(c,(u={},J(u,"".concat(c,"-").concat(s+1),s!==null&&n),J(u,"".concat(r,"-track-draggable"),b),u),v.track);return t.createElement("div",{className:R,style:Y(Y({},w),f),onMouseDown:h,onTouchStart:h})}function Pt(e){var u=e.prefixCls,r=e.style,f=e.values,o=e.startPoint,i=e.onStartMove,s=t.useContext(ve),b=s.included,M=s.range,S=s.min,y=s.styles,C=s.classNames,m=t.useMemo(function(){if(!M){if(f.length===0)return[];var n=o??S,v=f[0];return[{start:Math.min(n,v),end:Math.max(n,v)}]}for(var c=[],l=0;l<f.length-1;l+=1)c.push({start:f[l],end:f[l+1]});return c},[f,M,o,S]),g=null;return(C.tracks||y.tracks)&&(g=t.createElement(et,{index:null,prefixCls:u,start:m[0].start,end:m[m.length-1].end,replaceCls:se(C.tracks,"".concat(u,"-tracks")),style:y.tracks})),b?t.createElement(t.Fragment,null,g,m.map(function(n,v){var c=n.start,l=n.end;return t.createElement(et,{index:v,prefixCls:u,style:Y(Y({},he(r,v)),y.track),start:c,end:l,key:v,onStartMove:i})})):null}var Ht=t.forwardRef(function(e,u){var r,f=e.prefixCls,o=f===void 0?"rc-slider":f,i=e.className,s=e.style,b=e.classNames,M=e.styles,S=e.disabled,y=S===void 0?!1:S,C=e.keyboard,m=C===void 0?!0:C,g=e.autoFocus,n=e.onFocus,v=e.onBlur,c=e.min,l=c===void 0?0:c,a=e.max,h=a===void 0?100:a,w=e.step,R=w===void 0?1:w,H=e.value,T=e.defaultValue,L=e.range,N=e.count,_=e.onChange,P=e.onBeforeChange,A=e.onAfterChange,j=e.onChangeComplete,Q=e.allowCross,U=Q===void 0?!0:Q,B=e.pushable,$=B===void 0?!1:B,E=e.draggableTrack,x=e.reverse,G=e.vertical,de=e.included,le=de===void 0?!0:de,W=e.startPoint,be=e.trackStyle,Z=e.handleStyle,ue=e.railStyle,ee=e.dotStyle,p=e.activeDotStyle,te=e.marks,Pe=e.dots,De=e.handleRender,ye=e.tabIndex,Ce=ye===void 0?0:ye,Se=e.ariaLabelForHandle,ke=e.ariaLabelledByForHandle,Me=e.ariaValueTextFormatterForHandle,z=t.useRef(),Re=t.useRef(),$e=t.useMemo(function(){return G?x?"ttb":"btt":x?"rtl":"ltr"},[x,G]),K=t.useMemo(function(){return isFinite(l)?l:0},[l]),fe=t.useMemo(function(){return isFinite(h)?h:100},[h]),oe=t.useMemo(function(){return R!==null&&R<=0?1:R},[R]),rt=t.useMemo(function(){return typeof $=="boolean"?$?oe:!1:$>=0?$:!1},[$,oe]),_e=t.useMemo(function(){var D=Object.keys(te||{});return D.map(function(k){var d=te[k],O={value:Number(k)};return d&&ht(d)==="object"&&!t.isValidElement(d)&&("label"in d||"style"in d)?(O.style=d.style,O.label=d.label):O.label=d,O}).filter(function(k){var d=k.label;return d||typeof d=="number"}).sort(function(k,d){return k.value-d.value})},[te]),nt=Rt(K,fe,oe,_e,U,rt),Ae=V(nt,2),we=Ae[0],Xe=Ae[1],lt=bt(T,{value:H}),Ye=V(lt,2),ae=Ye[0],ut=Ye[1],I=t.useMemo(function(){var D=ae==null?[]:Array.isArray(ae)?ae:[ae],k=V(D,1),d=k[0],O=d===void 0?K:d,F=ae===null?[]:[O];if(L){if(F=ne(D),N||ae===void 0){var q=N>=0?N+1:2;for(F=F.slice(0,q);F.length<q;){var ce;F.push((ce=F[F.length-1])!==null&&ce!==void 0?ce:K)}}F.sort(function(ie,re){return ie-re})}return F.forEach(function(ie,re){F[re]=we(ie)}),F},[ae,L,K,N,we]),Ee=t.useRef(I);Ee.current=I;var me=function(k){return L?k:k[0]},Fe=function(k){var d=ne(k).sort(function(O,F){return O-F});_&&!Ct(d,Ee.current,!0)&&_(me(d)),ut(d)},Be=function(){A==null||A(me(Ee.current)),yt(!A,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),j==null||j(me(Ee.current))},ot=xt(Re,$e,I,K,fe,we,Fe,Be,Xe),Ne=V(ot,4),Ue=Ne[0],ct=Ne[1],Le=Ne[2],Ke=Ne[3],je=function(k,d){if(!y){var O=0,F=fe-K;I.forEach(function(ce,ie){var re=Math.abs(k-ce);re<=F&&(F=re,O=ie)});var q=ne(I);q[O]=k,L&&!I.length&&N===void 0&&q.push(k),P==null||P(me(q)),Fe(q),d&&Ke(d,O,q)}},it=function(k){k.preventDefault();var d=Re.current.getBoundingClientRect(),O=d.width,F=d.height,q=d.left,ce=d.top,ie=d.bottom,re=d.right,Qe=k.clientX,Ze=k.clientY,xe;switch($e){case"btt":xe=(ie-Ze)/F;break;case"ttb":xe=(Ze-ce)/F;break;case"rtl":xe=(re-Qe)/O;break;default:xe=(Qe-q)/O}var gt=K+xe*(fe-K);je(we(gt),k)},st=t.useState(null),Ge=V(st,2),Oe=Ge[0],We=Ge[1],vt=function(k,d){if(!y){var O=Xe(I,k,d);P==null||P(me(I)),Fe(O.values),We(O.value)}};t.useEffect(function(){if(Oe!==null){var D=I.indexOf(Oe);D>=0&&z.current.focus(D)}We(null)},[Oe]);var dt=t.useMemo(function(){return E&&oe===null?!1:E},[E,oe]),ze=function(k,d){Ke(k,d),P==null||P(me(Ee.current))},Ie=Ue!==-1;t.useEffect(function(){if(!Ie){var D=I.lastIndexOf(ct);z.current.focus(D)}},[Ie]);var ge=t.useMemo(function(){return ne(Le).sort(function(D,k){return D-k})},[Le]),ft=t.useMemo(function(){return L?[ge[0],ge[ge.length-1]]:[K,ge[0]]},[ge,L,K]),qe=V(ft,2),Ve=qe[0],Je=qe[1];t.useImperativeHandle(u,function(){return{focus:function(){z.current.focus(0)},blur:function(){var k=document,d=k.activeElement;Re.current.contains(d)&&(d==null||d.blur())}}}),t.useEffect(function(){g&&z.current.focus(0)},[]);var mt=t.useMemo(function(){return{min:K,max:fe,direction:$e,disabled:y,keyboard:m,step:oe,included:le,includedStart:Ve,includedEnd:Je,range:L,tabIndex:Ce,ariaLabelForHandle:Se,ariaLabelledByForHandle:ke,ariaValueTextFormatterForHandle:Me,styles:M||{},classNames:b||{}}},[K,fe,$e,y,m,oe,le,Ve,Je,L,Ce,Se,ke,Me,M,b]);return t.createElement(ve.Provider,{value:mt},t.createElement("div",{ref:Re,className:se(o,i,(r={},J(r,"".concat(o,"-disabled"),y),J(r,"".concat(o,"-vertical"),G),J(r,"".concat(o,"-horizontal"),!G),J(r,"".concat(o,"-with-marks"),_e.length),r)),style:s,onMouseDown:it},t.createElement("div",{className:se("".concat(o,"-rail"),b==null?void 0:b.rail),style:Y(Y({},ue),M==null?void 0:M.rail)}),t.createElement(Pt,{prefixCls:o,style:be,values:ge,startPoint:W,onStartMove:dt?ze:null}),t.createElement(Nt,{prefixCls:o,marks:_e,dots:Pe,style:ee,activeStyle:p}),t.createElement(Et,{ref:z,prefixCls:o,style:Z,values:Le,draggingIndex:Ue,onStartMove:ze,onOffsetChange:vt,onFocus:n,onBlur:v,handleRender:De,onChangeComplete:Be}),t.createElement(_t,{prefixCls:o,marks:_e,onClick:je})))});export{Ht as S};
