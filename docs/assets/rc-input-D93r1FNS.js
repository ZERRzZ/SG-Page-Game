import{c as y}from"./classnames-BK5ccKcQ.js";import{r as x,a as f}from"./react-s7AnpVDj.js";import{d as me,b as S,g as de,e as _,h as ge,c as ce,f as Ee}from"./@babel-CFFMjQWX.js";import{z as Ce,y as Se}from"./rc-util-C9ivse0O.js";function we(e){return!!(e.addonBefore||e.addonAfter)}function Ne(e){return!!(e.prefix||e.suffix||e.allowClear)}function fe(e,n,i){var o=n.cloneNode(!0),r=Object.create(e,{target:{value:o},currentTarget:{value:o}});return o.value=i,typeof n.selectionStart=="number"&&typeof n.selectionEnd=="number"&&(o.selectionStart=n.selectionStart,o.selectionEnd=n.selectionEnd),r}function ve(e,n,i,o){if(i){var r=n;if(n.type==="click"){r=fe(n,e,""),i(r);return}if(e.type!=="file"&&o!==void 0){r=fe(n,e,o),i(r);return}i(r)}}function be(e,n){if(e){e.focus(n);var i=n||{},o=i.cursor;if(o){var r=e.value.length;switch(o){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}var pe=function(n){var i,o,r=n.inputElement,E=n.children,v=n.prefixCls,D=n.prefix,R=n.suffix,w=n.addonBefore,F=n.addonAfter,Y=n.className,Z=n.style,k=n.disabled,M=n.readOnly,ee=n.focused,L=n.triggerFocus,m=n.allowClear,W=n.value,ne=n.handleReset,N=n.hidden,s=n.classes,a=n.classNames,A=n.dataAttrs,g=n.styles,d=n.components,j=E??r,te=(d==null?void 0:d.affixWrapper)||"span",P=(d==null?void 0:d.groupWrapper)||"span",T=(d==null?void 0:d.wrapper)||"span",c=(d==null?void 0:d.groupAddon)||"span",O=x.useRef(null),ae=function(q){var J;(J=O.current)!==null&&J!==void 0&&J.contains(q.target)&&(L==null||L())},$=Ne(n),h=x.cloneElement(j,{value:W,className:y(j.props.className,!$&&(a==null?void 0:a.variant))||null});if($){var C,z=null;if(m){var K,U=!k&&!M&&W,B="".concat(v,"-clear-icon"),oe=me(m)==="object"&&m!==null&&m!==void 0&&m.clearIcon?m.clearIcon:"âœ–";z=f.createElement("span",{onClick:ne,onMouseDown:function(q){return q.preventDefault()},className:y(B,(K={},S(K,"".concat(B,"-hidden"),!U),S(K,"".concat(B,"-has-suffix"),!!R),K)),role:"button",tabIndex:-1},oe)}var u="".concat(v,"-affix-wrapper"),I=y(u,(C={},S(C,"".concat(v,"-disabled"),k),S(C,"".concat(u,"-disabled"),k),S(C,"".concat(u,"-focused"),ee),S(C,"".concat(u,"-readonly"),M),S(C,"".concat(u,"-input-with-clear-btn"),R&&m&&W),C),s==null?void 0:s.affixWrapper,a==null?void 0:a.affixWrapper,a==null?void 0:a.variant),G=(R||m)&&f.createElement("span",{className:y("".concat(v,"-suffix"),a==null?void 0:a.suffix),style:g==null?void 0:g.suffix},z,R);h=f.createElement(te,de({className:I,style:g==null?void 0:g.affixWrapper,onClick:ae},A==null?void 0:A.affixWrapper,{ref:O}),D&&f.createElement("span",{className:y("".concat(v,"-prefix"),a==null?void 0:a.prefix),style:g==null?void 0:g.prefix},D),h,G)}if(we(n)){var H="".concat(v,"-group"),V="".concat(H,"-addon"),X="".concat(H,"-wrapper"),re=y("".concat(v,"-wrapper"),H,s==null?void 0:s.wrapper,a==null?void 0:a.wrapper),le=y(X,S({},"".concat(X,"-disabled"),k),s==null?void 0:s.group,a==null?void 0:a.groupWrapper);h=f.createElement(P,{className:le},f.createElement(T,{className:re},w&&f.createElement(c,{className:V},w),h,F&&f.createElement(c,{className:V},F)))}return f.cloneElement(h,{className:y((i=h.props)===null||i===void 0?void 0:i.className,Y)||null,style:_(_({},(o=h.props)===null||o===void 0?void 0:o.style),Z),hidden:N})},Re=["show"];function Fe(e,n){return x.useMemo(function(){var i={};n&&(i.show=me(n)==="object"&&n.formatter?n.formatter:!!n),i=_(_({},i),e);var o=i,r=o.show,E=ge(o,Re);return _(_({},E),{},{show:!!r,showFormatter:typeof r=="function"?r:void 0,strategy:E.strategy||function(v){return v.length}})},[e,n])}var Ae=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],ke=x.forwardRef(function(e,n){var i=e.autoComplete,o=e.onChange,r=e.onFocus,E=e.onBlur,v=e.onPressEnter,D=e.onKeyDown,R=e.prefixCls,w=R===void 0?"rc-input":R,F=e.disabled,Y=e.htmlSize,Z=e.className,k=e.maxLength,M=e.suffix,ee=e.showCount,L=e.count,m=e.type,W=m===void 0?"text":m,ne=e.classes,N=e.classNames,s=e.styles,a=e.onCompositionStart,A=e.onCompositionEnd,g=ge(e,Ae),d=x.useState(!1),j=ce(d,2),te=j[0],P=j[1],T=x.useRef(!1),c=x.useRef(null),O=function(t){c.current&&be(c.current,t)},ae=Ce(e.defaultValue,{value:e.value}),$=ce(ae,2),h=$[0],C=$[1],z=h==null?"":String(h),K=x.useState(null),U=ce(K,2),B=U[0],oe=U[1],u=Fe(L,ee),I=u.max||k,G=u.strategy(z),H=!!I&&G>I;x.useImperativeHandle(n,function(){return{focus:O,blur:function(){var t;(t=c.current)===null||t===void 0||t.blur()},setSelectionRange:function(t,b,Q){var p;(p=c.current)===null||p===void 0||p.setSelectionRange(t,b,Q)},select:function(){var t;(t=c.current)===null||t===void 0||t.select()},input:c.current}}),x.useEffect(function(){P(function(l){return l&&F?!1:l})},[F]);var V=function(t,b,Q){var p=b;if(!T.current&&u.exceedFormatter&&u.max&&u.strategy(b)>u.max){if(p=u.exceedFormatter(b,{max:u.max}),b!==p){var ue,se;oe([((ue=c.current)===null||ue===void 0?void 0:ue.selectionStart)||0,((se=c.current)===null||se===void 0?void 0:se.selectionEnd)||0])}}else if(Q.source==="compositionEnd")return;C(p),c.current&&ve(c.current,t,o,p)};x.useEffect(function(){if(B){var l;(l=c.current)===null||l===void 0||l.setSelectionRange.apply(l,Ee(B))}},[B]);var X=function(t){V(t,t.target.value,{source:"change"})},re=function(t){T.current=!1,V(t,t.currentTarget.value,{source:"compositionEnd"}),A==null||A(t)},le=function(t){v&&t.key==="Enter"&&v(t),D==null||D(t)},ie=function(t){P(!0),r==null||r(t)},q=function(t){P(!1),E==null||E(t)},J=function(t){C(""),O(),c.current&&ve(c.current,t,o)},he=H&&"".concat(w,"-out-of-range"),ye=function(){var t=Se(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return f.createElement("input",de({autoComplete:i},t,{onChange:X,onFocus:ie,onBlur:q,onKeyDown:le,className:y(w,S({},"".concat(w,"-disabled"),F),N==null?void 0:N.input),style:s==null?void 0:s.input,ref:c,size:Y,type:W,onCompositionStart:function(Q){T.current=!0,a==null||a(Q)},onCompositionEnd:re}))},xe=function(){var t=Number(I)>0;if(M||u.show){var b=u.showFormatter?u.showFormatter({value:z,count:G,maxLength:I}):"".concat(G).concat(t?" / ".concat(I):"");return f.createElement(f.Fragment,null,u.show&&f.createElement("span",{className:y("".concat(w,"-show-count-suffix"),S({},"".concat(w,"-show-count-has-suffix"),!!M),N==null?void 0:N.count),style:_({},s==null?void 0:s.count)},b),M)}return null};return f.createElement(pe,de({},g,{prefixCls:w,className:y(Z,he),handleReset:J,value:z,focused:te,triggerFocus:O,suffix:xe(),disabled:F,classes:ne,classNames:N,styles:s}),ye())});export{pe as B,ke as I,ve as r,be as t,Fe as u};
